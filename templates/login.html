{% extends "base.html" %}
{% load widget_tweaks %}
{% load static %}

{% block title %}Login{% endblock %}
{% block container_titre %}Login{% endblock %}

{% block container %}
<div class="position-relative" style="min-height: 80vh;">

  <!-- BACKGROUND IMAGE SUR LOGIN UNIQUEMENT -->
  <div class="position-absolute top-0 start-0 w-100 h-100"
       style="background: url(&quot;{% static 'image/logo.jpg' %}&quot;) center center / cover no-repeat;
              filter: brightness(0.6);
              z-index: 1;">
  </div>

  <!-- FORM CONTAINER -->
  <div class="d-flex justify-content-center align-items-start" style="position: relative; z-index: 2; min-height: 80vh;">
    <div class="card shadow-lg rounded-4 p-4 mt-5"
         style="max-width: 400px; width: 100%; backdrop-filter: blur(10px); background: rgba(255,255,255,0.25);">

      <h3 class="text-center text-white fw-bold mb-4">Login</h3>

      <form method="POST">
        {% csrf_token %}

        {% for field in form %}
        <div class="mb-3 text-white">
          {{ field.label_tag }}

          <div class="input-group">
            <span class="input-group-text bg-light">
              {% if field.name == "username" %}<i class="bi bi-person"></i>
              {% elif field.name == "email" %}<i class="bi bi-envelope"></i>
              {% elif field.name == "password" %}<i class="bi bi-lock"></i>
              {% else %}<i class="bi bi-input-cursor-text"></i>{% endif %}
            </span>
            {{ field|add_class:"form-control" }}
          </div>

          {% if field.errors %}
          <small class="text-danger">{{ field.errors|striptags }}</small>
          {% endif %}
        </div>
        {% endfor %}

        {% if form.non_field_errors %}
        <div class="alert alert-danger">{{ form.non_field_errors }}</div>
        {% endif %}

        <button type="submit" class="btn btn-primary w-100 mt-3">
          <i class="bi bi-box-arrow-in-right me-1"></i> Log in
        </button>

        <div class="text-center mt-4">
          <span class="text-light">No account?</span>
          <a href="{% url 'signup' %}" class="fw-semibold text-decoration-none text-light">Create one</a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
